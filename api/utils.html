<html>
  <head>
    <title>API - utils - Kanso Framework</title>
    <link rel="stylesheet" href="http://yandex.st/highlightjs/5.16/styles/github.min.css">
    <link rel="stylesheet" href="../css/kanso.css" />
    <!--[if IE]>
      <link rel="stylesheet" href="../css/kanso_ie.css" />
    <![endif]-->
  </head>
  <body>
    <div id="topbar">
      <a id="logo" href="../index.html">
        <img src="../images/kanso_small.png" />
      </a>
      <a id="site" href="../index.html">Framework</a>
      <div id="rightmenu">
        <ul id="topmenu">
          <li>
            <a href="../index.html">About</a>
          </li>
          <li>
            <a href="../guides/index.html">Guides</a>
          </li>
          <li>
            <a href="../community.html">Community</a>
          </li>
          <li class="active">
            <a href="../api/index.html">API</a>
          </li>
          <li>
            <a href="https://github.com/caolan/kanso">Code</a>
          </li>
          <li>
            <a href="../download.html">Download</a>
          </li>
        </ul>
        <!--
        <ul id="sessionmenu">
          <li><a href="#">Create Account</a></li>
          <li><a href="#">Sign In</a></li>
        </ul>
        -->
      </div>
    </div>

    <div id="content">
      <h1>Kanso API Documentation</h1><p><a href="index.html">Index</a> | <a href="all.html">View on single page</a></p><div class="toc"><h2>Table of Contents</h2><ul><li><a href="#utils">utils</a><ul><li><a href="#utils.getBaseURL">getBaseURL(req)</a></li><li><a href="#utils.getPropertyPath">getPropertyPath(obj, path)</a></li><li><a href="#utils.setPropertyPath">setPropertyPath(obj, path, val)</a></li><li><a href="#utils.escapeHTML">escapeHTML(s)</a></li><li><a href="#utils.parseCSV">parseCSV(csvString)</a></li><li><a href="#utils.redirect">redirect(req, url)</a></li><li><a href="#utils.isSubPath">isSubPath(a, b)</a></li><li><a href="#utils.titleize">titleize(str)</a></li><li><a href="#utils.bindContext">bindContext(context, closure)</a></li></ul></li></ul></div><h2 id="utils">utils</h2><p>General utility functions used by Kanso. Some functions were moved here from
other modules (such as core), to avoid a circular dependency bug in CouchDB.</p>

<p>This module also stores some useful properties such as 'isBrowser', which is
true if the code is running in a browser environment, and 'initial_hit' which
is set to true when a page is first requested from CouchDB (and set to false
for subsequent requests).</p><h3 id="utils.getBaseURL">getBaseURL(req)</h3><p>Returns the path to prefix to any URLs. When running behind a
virtual host, there is nothing to prefix URLs with. When accessing the
app directly, URLs need to be prefixed with /db/_design/appname/_rewrite.</p>

<p>The request object argument is only required when run server-side, but its
a good idea to include it whenever you call getBaseURL.</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="utils.getPropertyPath">getPropertyPath(obj, path)</h3><p>Traverses an object and its sub-objects using an array of property names.
Returns the value of the matched path, or undefined if the property does not
exist.</p>

<p>If a string if used for the path, it is assumed to be a path with a single
key (the given string).</p>

<pre>
getPropertyPath({a: {b: 'foo'}}, ['a','b']) -> 'foo'
getPropertyPath({a: {b: 'foo'}}, 'a') -> {b: 'foo'}
</pre><h4>Parameters</h4><table class="params"><tr><td class="name">obj</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">path</td><td class="type">Array|String</td><td class="description"></td></tr></table><h3 id="utils.setPropertyPath">setPropertyPath(obj, path, val)</h3><p>Traverses an object and its sub-objects using an array of property names.
Sets the value of the matched property.</p>

<p>If a string if used for the path, it is assumed to be a path with a single
key (the given string).</p>

<pre>
setPropertyPath({}, ['a','b'], 'foo') -> {a: {b: 'foo'}}
setPropertyPath({}, 'a', 'foo') -> {a: 'foo'}
</pre><h4>Parameters</h4><table class="params"><tr><td class="name">obj</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">path</td><td class="type">Array|String</td><td class="description"></td></tr></table><h3 id="utils.escapeHTML">escapeHTML(s)</h3><p>Encodes required characters as HTML entities so a string can be included
in a page.</p><h4>Parameters</h4><table class="params"><tr><td class="name">s</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="utils.parseCSV">parseCSV(csvString)</h3><p>Parse CSV strings into an array of rows, each row an array of values.
Used by the array field's default CSV widget.</p><h4>Parameters</h4><table class="params"><tr><td class="name">csvString</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Array</span></div><h3 id="utils.redirect">redirect(req, url)</h3><p>Creates CouchDB response object for returning from a show, list or update
function, which redirects to the given app url (automatically prepending the
baseURL)</p><h4>Parameters</h4><table class="params"><tr><td class="name">req</td><td class="type">Object</td><td class="description"></td></tr><tr><td class="name">url</td><td class="type">String</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Object</span></div><h3 id="utils.isSubPath">isSubPath(a, b)</h3><p>Tests if path b is equal to or a sub-path of a.</p><h4>Parameters</h4><table class="params"><tr><td class="name">a</td><td class="type">Array</td><td class="description"></td></tr><tr><td class="name">b</td><td class="type">Array</td><td class="description"></td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">Boolean</span></div><h3 id="utils.titleize">titleize(str)</h3><p>Return a title-case version of the supplied string.</p><h4>Parameters</h4><table class="params"><tr><td class="name">str</td><td class="type"></td><td class="description">The string to transform.</td></tr></table><div class="returns"><strong>Returns: </strong><span class="type">String</span></div><h3 id="utils.bindContext">bindContext(context, closure)</h3><p>Returns a function that executes {closure} in the context of {context}.
Use this function if you'd like to preserve the current context
across callbacks, event handlers, and other cases where the value of
{this} is set for you.</p><h4>Parameters</h4><table class="params"><tr><td class="name">context</td><td class="type">Object</td><td class="description">The context to use when executing closure.Usually, you will specify the current value of 'this'.</td></tr><tr><td class="name">closure</td><td class="type">Function</td><td class="description">The function to to bind to {context}.</td></tr></table>
    </div>

    <script src="http://yandex.st/highlightjs/5.16/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-20477836-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </body>
</html>
