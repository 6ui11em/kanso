<html>
  <head>
    <title>How Kanso Processes Requests - Kanso Framework</title>
    <link rel="stylesheet" href="http://yandex.st/highlightjs/5.16/styles/github.min.css">
    <link rel="stylesheet" href="../css/kanso.css" />
    <!--[if IE]>
      <link rel="stylesheet" href="../css/kanso_ie.css" />
    <![endif]-->
  </head>
  <body>
    <div id="topbar">
      <a id="logo" href="../index.html">
        <img src="../images/kanso_small.png" />
      </a>
      <a id="site" href="../index.html">Framework</a>
      <div id="rightmenu">
        <ul id="topmenu">
          <li>
            <a href="../index.html">About</a>
          </li>
          <li class="active">
            <a href="../guides/index.html">Guides</a>
          </li>
          <li>
            <a href="../community.html">Community</a>
          </li>
          <li>
            <a href="../api/index.html">API</a>
          </li>
          <li>
            <a href="https://github.com/caolan/kanso">Code</a>
          </li>
          <li>
            <a href="../download.html">Download</a>
          </li>
        </ul>
        <!--
        <ul id="sessionmenu">
          <li><a href="#">Create Account</a></li>
          <li><a href="#">Sign In</a></li>
        </ul>
        -->
      </div>
    </div>

    <div id="content">
      <h1>How Kanso Processes Requests</h1>

<p>Kanso makes it easy to re-use code between the client and server wherever
possible, but to be used effectively you must understand how requests are
processed.</p>

<p><img src="images/request_flow.png" alt="Kanso request flow" class="diagram" /></p>

<ol>
<li>The browser makes a request to <code>/foo</code></li>
<li>CouchDB looks up the show / list / update function that <code>/foo</code>
rewrites to.</li>
<li>This function is executed server-side by CouchDB, rendering a HTML page
containing the document or view.</li>
<li>The browser receives the pre-rendered version of the page from CouchDB.
If JavaScript is not enabled, the process stops here until a link is
clicked or a form is submitted, causing a new request to the CouchDB server.</li>
<li>If JavaScript is enabled, Kanso looks up the show / list / update function
for <code>/foo</code> and executes it again, client-side. This allows the
application developer to enhance the page by making additional requests and
generally doing things CouchDB wouldn't normally allow.</li>
<li>Kanso binds event handlers for every form submit and link click
(even ones yet to exist). If the target URL is part of your app, Kanso
will look up the new show / list / update function and execute it client-side
without a round-trip to the server (apart from fetching relevent documents
or views).</li>
</ol>
    </div>

    <script src="http://yandex.st/highlightjs/5.16/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-20477836-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </body>
</html>
